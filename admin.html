<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salsabilah Empire - Professional POS</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #f4f7f6; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 10px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .card { border: 1px solid #ddd; padding: 15px; border-radius: 8px; background: #fff; }
        input, select, button { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { background: #2c3e50; color: white; cursor: pointer; font-weight: bold; border: none; }
        button:hover { background: #34495e; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #2c3e50; color: white; }
    </style>
</head>
<body>

<div class="container">
    <h1>üëë Salsabilah Amin Empires - POS & Inventory</h1>
    
    <div class="grid">
        <div class="card">
            <h3>üõí ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡ßü (Sales)</h3>
            <input type="text" id="custName" placeholder="‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ">
            <select id="prodSelect">
                <option value="">‡¶™‡¶£‡ßç‡¶Ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                </select>
            <input type="number" id="saleQty" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">
            <button onclick="makeSale()">‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡ßü ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>

        <div class="card">
            <h3>üì¶ ‡¶∏‡ßç‡¶ü‡¶ï ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ì ‡¶ñ‡¶∞‡¶ö (Inventory & Expense)</h3>
            <input type="text" id="itemName" placeholder="‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ/‡¶ñ‡¶∞‡¶ö‡ßá‡¶∞ ‡¶ñ‡¶æ‡¶§">
            <input type="number" id="itemQty" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£/‡¶ü‡¶æ‡¶ï‡¶æ">
            <select id="typeSelect">
                <option value="stock">‡¶∏‡ßç‡¶ü‡¶ï ‡¶á‡¶® (Stock-In)</option>
                <option value="expense">‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶ñ‡¶∞‡¶ö (Expense)</option>
            </select>
            <button onclick="updateLedger()">‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶¶‡¶ø‡¶®</button>
        </div>
    </div>

    <div class="card" style="margin-top: 20px;">
        <h3>üìä ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶á‡¶®‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶∞‡¶ø ‡¶ì ‡¶≤‡ßá‡¶ú‡¶æ‡¶∞</h3>
        <table id="ledgerTable">
            <thead>
                <tr>
                    <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                    <th>‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</th>
                    <th>‡¶á‡¶®/‡¶Ü‡¶â‡¶ü</th>
                    <th>‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</th>
                </tr>
            </thead>
            <tbody id="ledgerBody"></tbody>
        </table>
    </div>
</div>

<script>
    // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡¶≤‡ßá‡¶∏ ‡¶¨‡¶æ ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶≤‡¶ú‡¶ø‡¶ï (‡¶Ü‡¶™‡¶æ‡¶§‡¶§ ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡¶ø)
    let inventory = JSON.parse(localStorage.getItem('inventory')) || {};
    let ledger = JSON.parse(localStorage.getItem('ledger')) || [];

    function updateLedger() {
        const name = document.getElementById('itemName').value;
        const qty = parseInt(document.getElementById('itemQty').value);
        const type = document.getElementById('typeSelect').value;
        const date = new Date().toLocaleDateString();

        if(type === 'stock') {
            inventory[name] = (inventory[name] || 0) + qty;
            ledger.push({date, desc: `‡¶∏‡ßç‡¶ü‡¶ï ‡¶á‡¶®: ${name}`, change: `+${qty}`, balance: inventory[name]});
        } else {
            ledger.push({date, desc: `‡¶ñ‡¶∞‡¶ö: ${name}`, change: `-${qty} TK`, balance: 'N/A'});
        }
        
        saveAndRender();
    }

    function makeSale() {
        const cust = document.getElementById('custName').value;
        const prod = document.getElementById('prodSelect').value;
        const qty = parseInt(document.getElementById('saleQty').value);
        const date = new Date().toLocaleDateString();

        if(inventory[prod] >= qty) {
            inventory[prod] -= qty;
            ledger.push({date, desc: `${cust}-‡¶ï‡ßá ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡ßü: ${prod}`, change: `-${qty}`, balance: inventory[prod]});
            saveAndRender();
            alert('‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡ßü ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
        } else {
            alert('‡¶∏‡ßç‡¶ü‡¶ï ‡¶∂‡ßá‡¶∑!');
        }
    }

    function saveAndRender() {
        localStorage.setItem('inventory', JSON.stringify(inventory));
        localStorage.setItem('ledger', JSON.stringify(ledger));
        render();
    }

    function render() {
        const body = document.getElementById('ledgerBody');
        body.innerHTML = ledger.map(item => `
            <tr>
                <td>${item.date}</td>
                <td>${item.desc}</td>
                <td>${item.change}</td>
                <td>${item.balance}</td>
            </tr>
        `).reverse().join('');

        const select = document.getElementById('prodSelect');
        select.innerHTML = '<option value="">‡¶™‡¶£‡ßç‡¶Ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</option>' + 
            Object.keys(inventory).map(p => `<option value="${p}">${p} (‡¶∏‡ßç‡¶ü‡¶ï: ${inventory[p]})</option>`).join('');
    }

    // ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï‡¶æ‡¶∞ (PWA)
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js');
    }

    render();
</script>
</body>
</html>
